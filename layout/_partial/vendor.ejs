<!-- Comments -->
<% if (post.comments) { %>
    <% if (theme.disqus_shortname) { %>
        <script>
             var disqus_config = function () {
                 this.page.url = '<%= post.permalink %>';
                 <% if (post.disqusIdentifier) { %>
                    this.page.identifier = '<%= post.disqusIdentifier %>';
                 <% } else { %>
                    this.page.identifier = '<%= post.path %>';
                 <% } %>
             };
            (function() {
                var d = document, s = d.createElement('script');
                var disqus_shortname = '<%= theme.disqus_shortname %>';
                s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
    <% } else if (theme.gitment.enable) { %>
        <script type="text/javascript">
            let renderComments = function() {
                new Gitment({
                    id: '<%= post.permalink %>',
                    owner: '<%- theme.gitment.github_id %>',
                    repo: '<%- theme.gitment.repo %>',
                    oauth: {
                        client_id: '<%- theme.gitment.client_id %>',
                        client_secret: '<%- theme.gitment.client_secret %>',
                    }
                }).render('disqus_thread');
            }
        </script>
        <script defer type="text/javascript" src="https://cdn.jsdelivr.net/npm/gitment@0.0.3/dist/gitment.browser.js" integrity="sha256-TJQ1gWbe8I56SLEXboW7sxlRPBFcsClfS/jIx4KeY58=" crossorigin="anonymous" charset="UTF-8" onload="renderComments()"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitment@0.0.3/style/default.css" integrity="sha256-h7Kbizj+YVw5aV3VF9HfjeISiuyuJYipoarYYcm9Mxo=" crossorigin="anonymous">
    <% } %>
<% } %>

<!-- Algolia search -->
<% if (config.algolia && config.algolia.appId && config.algolia.apiKey && config.algolia.indexName) { %>
    <script src="https://cdn.jsdelivr.net/npm/algoliasearch@3.33.0/dist/algoliasearch.min.js" integrity="sha256-QynuWpCv2O4N4X31gbirq+VZE1L48AAebkaYp01uXOM=" crossorigin="anonymous"></script>
    <script>
        const algoliaSearch = algoliasearch('<%= config.algolia.appId %>', '<%= config.algolia.apiKey %>');
        const algoliaIndex = algoliaSearch.initIndex('<%= config.algolia.indexName %>')
    </script>
<% } %>

<!-- Analytics -->
<% if (theme.google_analytics_id) { %>
    <script defer src="https://www.googletagmanager.com/gtag/js?id=<%= theme.google_analytics_id %>"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '<%= theme.google_analytics_id %>');
    </script>
<% } %>

<% if (theme.baidu_analytics_id) { %>
    <script defer src="https://hm.baidu.com/hm.js?<%= theme.baidu_analytics_id %>"></script>
<% } %>
