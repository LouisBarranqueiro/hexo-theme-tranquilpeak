/* Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. See License.txt in the project root for license information.*/
(function(a){var b={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},c=b[typeof window]&&window||this,d=b[typeof exports]&&exports&&!exports.nodeType&&exports,e=b[typeof module]&&module&&!module.nodeType&&module,f=(e&&e.exports===d&&d,b[typeof global]&&global);!f||f.global!==f&&f.window!==f||(c=f),"function"==typeof define&&define.amd?define(["rx"],function(b,d){return a(c,d,b)}):"object"==typeof module&&module&&module.exports===d?module.exports=a(c,module.exports,require("./rx")):c.Rx=a(c,{},c.Rx)}).call(this,function(a,b,c,d){function e(){try{return n.apply(this,arguments)}catch(a){return J.e=a,J}}function f(a){if(!y(a))throw new TypeError("fn must be a function");return n=a,e}function g(a,b,c){return new r(function(d){var e=!1,f=null,g=[];return a.subscribe(function(a){var h,i;try{i=b(a)}catch(j){return void d.onError(j)}if(h=0,e)try{h=c(i,f)}catch(k){return void d.onError(k)}else e=!0,f=i;h>0&&(f=i,g=[]),h>=0&&g.push(a)},function(a){d.onError(a)},function(){d.onNext(g),d.onCompleted()})},a)}function h(a){if(0===a.length)throw new G;return a[0]}function i(a,b,c,d){if(0>b)throw new I;return new r(function(e){var f=b;return a.subscribe(function(a){0===f--&&(e.onNext(a),e.onCompleted())},function(a){e.onError(a)},function(){c?(e.onNext(d),e.onCompleted()):e.onError(new I)})},a)}function j(a,b,c){return new r(function(d){var e=c,f=!1;return a.subscribe(function(a){f?d.onError(new Error("Sequence contains more than one element")):(e=a,f=!0)},function(a){d.onError(a)},function(){f||b?(d.onNext(e),d.onCompleted()):d.onError(new G)})},a)}function k(a,b,c){return new r(function(d){return a.subscribe(function(a){d.onNext(a),d.onCompleted()},function(a){d.onError(a)},function(){b?(d.onNext(c),d.onCompleted()):d.onError(new G)})},a)}function l(a,b,c){return new r(function(d){var e=c,f=!1;return a.subscribe(function(a){e=a,f=!0},function(a){d.onError(a)},function(){f||b?(d.onNext(e),d.onCompleted()):d.onError(new G)})},a)}function m(a,b,c,e){var f=F(b,c,3);return new r(function(b){var c=0;return a.subscribe(function(d){var g;try{g=f(d,c,a)}catch(h){return void b.onError(h)}g?(b.onNext(e?c:d),b.onCompleted()):c++},function(a){b.onError(a)},function(){b.onNext(e?-1:d),b.onCompleted()})},a)}var n,o=c.Observable,p=o.prototype,q=c.CompositeDisposable,r=c.AnonymousObservable,s=c.Disposable.empty,t=(c.internals.isEqual,c.helpers),u=t.not,v=t.defaultComparer,w=t.identity,x=t.defaultSubComparer,y=t.isFunction,z=t.isPromise,A=t.isArrayLike,B=t.isIterable,C=c.internals.inherits,D=o.fromPromise,E=o.from,F=c.internals.bindCallback,G=c.EmptyError,H=c.ObservableBase,I=c.ArgumentOutOfRangeError,J={e:{}};p.aggregate=function(){var a,b,c=!1,d=this;return 2===arguments.length?(c=!0,b=arguments[0],a=arguments[1]):a=arguments[0],new r(function(e){var f,g,h;return d.subscribe(function(d){!h&&(h=!0);try{f?g=a(g,d):(g=c?a(b,d):d,f=!0)}catch(i){return e.onError(i)}},function(a){e.onError(a)},function(){h&&e.onNext(g),!h&&c&&e.onNext(b),!h&&!c&&e.onError(new G),e.onCompleted()})},d)};var K=function(a){function b(b,c,d,e){this.source=b,this.acc=c,this.hasSeed=d,this.seed=e,a.call(this)}function c(a,b){this.o=a,this.acc=b.acc,this.hasSeed=b.hasSeed,this.seed=b.seed,this.hasAccumulation=!1,this.result=null,this.hasValue=!1,this.isStopped=!1}return C(b,a),b.prototype.subscribeCore=function(a){return this.source.subscribe(new c(a,this))},c.prototype.onNext=function(a){this.isStopped||(!this.hasValue&&(this.hasValue=!0),this.hasAccumulation?this.result=f(this.acc)(this.result,a):(this.result=this.hasSeed?f(this.acc)(this.seed,a):a,this.hasAccumulation=!0),this.result===J&&this.o.onError(this.result.e))},c.prototype.onError=function(a){this.isStopped||(this.isStopped=!0,this.o.onError(a))},c.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.hasValue&&this.o.onNext(this.result),!this.hasValue&&this.hasSeed&&this.o.onNext(this.seed),!this.hasValue&&!this.hasSeed&&this.o.onError(new G),this.o.onCompleted())},c.prototype.dispose=function(){this.isStopped=!0},c.prototype.fail=function(a){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(a),!0)},b}(H);return p.reduce=function(a){var b=!1;if(2===arguments.length){b=!0;var c=arguments[1]}return new K(this,a,b,c)},p.some=function(a,b){var c=this;return a?c.filter(a,b).some():new r(function(a){return c.subscribe(function(){a.onNext(!0),a.onCompleted()},function(b){a.onError(b)},function(){a.onNext(!1),a.onCompleted()})},c)},p.any=function(){return this.some.apply(this,arguments)},p.isEmpty=function(){return this.any().map(u)},p.every=function(a,b){return this.filter(function(b){return!a(b)},b).some().map(u)},p.all=function(){return this.every.apply(this,arguments)},p.includes=function(a,b){function c(a,b){return 0===a&&0===b||a===b||isNaN(a)&&isNaN(b)}var d=this;return new r(function(e){var f=0,g=+b||0;return Math.abs(g)===1/0&&(g=0),0>g?(e.onNext(!1),e.onCompleted(),s):d.subscribe(function(b){f++>=g&&c(b,a)&&(e.onNext(!0),e.onCompleted())},function(a){e.onError(a)},function(){e.onNext(!1),e.onCompleted()})},this)},p.contains=function(a,b){p.includes(a,b)},p.count=function(a,b){return a?this.filter(a,b).count():this.reduce(function(a){return a+1},0)},p.indexOf=function(a,b){var c=this;return new r(function(d){var e=0,f=+b||0;return Math.abs(f)===1/0&&(f=0),0>f?(d.onNext(-1),d.onCompleted(),s):c.subscribe(function(b){e>=f&&b===a&&(d.onNext(e),d.onCompleted()),e++},function(a){d.onError(a)},function(){d.onNext(-1),d.onCompleted()})},c)},p.sum=function(a,b){return a&&y(a)?this.map(a,b).sum():this.reduce(function(a,b){return a+b},0)},p.minBy=function(a,b){return b||(b=x),g(this,a,function(a,c){return-1*b(a,c)})},p.min=function(a){return this.minBy(w,a).map(function(a){return h(a)})},p.maxBy=function(a,b){return b||(b=x),g(this,a,b)},p.max=function(a){return this.maxBy(w,a).map(function(a){return h(a)})},p.average=function(a,b){return a&&y(a)?this.map(a,b).average():this.reduce(function(a,b){return{sum:a.sum+b,count:a.count+1}},{sum:0,count:0}).map(function(a){if(0===a.count)throw new G;return a.sum/a.count})},p.sequenceEqual=function(a,b){var c=this;return b||(b=v),new r(function(d){var e=!1,f=!1,g=[],h=[],i=c.subscribe(function(a){var c,e;if(h.length>0){e=h.shift();try{c=b(e,a)}catch(i){return void d.onError(i)}c||(d.onNext(!1),d.onCompleted())}else f?(d.onNext(!1),d.onCompleted()):g.push(a)},function(a){d.onError(a)},function(){e=!0,0===g.length&&(h.length>0?(d.onNext(!1),d.onCompleted()):f&&(d.onNext(!0),d.onCompleted()))});(A(a)||B(a))&&(a=E(a)),z(a)&&(a=D(a));var j=a.subscribe(function(a){var c;if(g.length>0){var f=g.shift();try{c=b(f,a)}catch(i){return void d.onError(i)}c||(d.onNext(!1),d.onCompleted())}else e?(d.onNext(!1),d.onCompleted()):h.push(a)},function(a){d.onError(a)},function(){f=!0,0===h.length&&(g.length>0?(d.onNext(!1),d.onCompleted()):e&&(d.onNext(!0),d.onCompleted()))});return new q(i,j)},c)},p.elementAt=function(a){return i(this,a,!1)},p.elementAtOrDefault=function(a,b){return i(this,a,!0,b)},p.single=function(a,b){return a&&y(a)?this.where(a,b).single():j(this,!1)},p.singleOrDefault=function(a,b,c){return a&&y(a)?this.filter(a,c).singleOrDefault(null,b):j(this,!0,b)},p.first=function(a,b){return a?this.where(a,b).first():k(this,!1)},p.firstOrDefault=function(a,b,c){return a?this.where(a).firstOrDefault(null,b):k(this,!0,b)},p.last=function(a,b){return a?this.where(a,b).last():l(this,!1)},p.lastOrDefault=function(a,b,c){return a?this.where(a,c).lastOrDefault(null,b):l(this,!0,b)},p.find=function(a,b){return m(this,a,b,!1)},p.findIndex=function(a,b){return m(this,a,b,!0)},p.toSet=function(){if("undefined"==typeof a.Set)throw new TypeError;var b=this;return new r(function(c){var d=new a.Set;return b.subscribe(function(a){d.add(a)},function(a){c.onError(a)},function(){c.onNext(d),c.onCompleted()})},b)},p.toMap=function(b,c){if("undefined"==typeof a.Map)throw new TypeError;var d=this;return new r(function(e){var f=new a.Map;return d.subscribe(function(a){var d;try{d=b(a)}catch(g){return void e.onError(g)}var h=a;if(c)try{h=c(a)}catch(g){return void e.onError(g)}f.set(d,h)},function(a){e.onError(a)},function(){e.onNext(f),e.onCompleted()})},d)},c});
//# sourceMappingURL=rx.aggregates.map